<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Skill Gap Analyzer — Resume Upload</title>
  <link rel="stylesheet" href="static/main.css" />
  <style>
    .file-protocol-warning {
      background: #ff4444;
      color: white;
      padding: 20px;
      text-align: center;
      margin: 20px;
      border-radius: 8px;
    }
    .file-protocol-warning a {
      color: #ffff00;
      font-weight: bold;
    }
  </style>
</head>
<body>
  <div id="file-protocol-check"></div>
  <div class="container">
    <h1>Resume Upload & Skill Extractor</h1>

    <div class="card">
      <label for="token">Authorization Token (Bearer)</label>
      <input id="token" placeholder="Paste your access token (optional)" />

      <label for="resume">Choose resume (PDF / DOCX / TXT)</label>
      <input id="resume" type="file" accept=".pdf,.docx,.txt" />

      <button id="upload">Upload & Parse</button>
    </div>

    <div id="status" class="card">No upload yet.</div>

    <div id="result" class="card hidden">
      <h2>Parsed Resume</h2>
      <div><strong>Filename:</strong> <span id="r-filename"></span></div>
      <div><strong>Experience:</strong> <span id="r-experience"></span></div>
      <div><strong>Skills Extracted:</strong></div>
      <ul id="r-skills"></ul>
    </div>
  </div>

  <script>
    // Check for file:// protocol
    if (window.location.protocol === 'file:') {
      document.getElementById('file-protocol-check').innerHTML = `
        <div class="file-protocol-warning">
          <h2>❌ Wrong Way to Open Application!</h2>
          <p>You opened the file directly. Please use:</p>
          <p><a href="http://localhost:3000/app.html">http://localhost:3000/app.html</a></p>
          <p>Make sure frontend server is running: <code>cd frontend && python server.py</code></p>
        </div>
      `;
    }
  </script>
  <script src="static/upload.js"></script>
</body>
</html>
